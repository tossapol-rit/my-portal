openapi: 3.0.0
info:
  title: ${{ values.name }} API
  description: REST API for ${{ values.name }}
  version: 1.0.0
  contact:
    name: ${{ values.owner }}
    url: https://github.com/${{ values.owner }}/${{ values.name }}

servers:
  - url: http://localhost:${{ values.port }}
    description: Development server
  - url: https://api.example.com
    description: Production server

tags:
  - name: Health
    description: Health check endpoints
  - name: API
    description: Main API endpoints

paths:
  /health:
    get:
      tags:
        - Health
      summary: Health check
      description: Returns the health status of the service
      responses:
        '200':
          description: Service is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: UP
                  timestamp:
                    type: string
                    format: date-time
                  service:
                    type: string
                    example: ${{ values.name }}
                  version:
                    type: string
                    example: 1.0.0

  /api/v1/hello:
    get:
      tags:
        - API
      summary: Hello endpoint
      description: Returns a greeting message
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Hello from ${{ values.name }}!
                  timestamp:
                    type: string
                    format: date-time

  /api/v1/info:
    get:
      tags:
        - API
      summary: Service information
      description: Returns information about the service
      responses:
        '200':
          description: Service information
          content:
            application/json:
              schema:
                type: object
                properties:
                  service:
                    type: string
                    example: ${{ values.name }}
                  description:
                    type: string
                    example: ${{ values.description }}
                  version:
                    type: string
                    example: 1.0.0
                  nodeVersion:
                    type: string
                    example: v${{ values.nodeVersion }}.0.0
                  database:
                    type: string
                    example: postgres
                  uptime:
                    type: number
                    example: 123.456

  {% if values.databaseType != "none" %}
  /api/v1/db-status:
    get:
      tags:
        - Health
      summary: Database status
      description: Returns the database connection status
      responses:
        '200':
          description: Database is connected
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: connected
                  database:
                    type: string
                    example: postgres
        '500':
          description: Database connection error
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: error
                  message:
                    type: string
  {% endif %}

components:
  schemas:
    Error:
      type: object
      properties:
        error:
          type: string
        message:
          type: string
